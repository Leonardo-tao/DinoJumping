{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'playGame',\n  data() {\n    return {\n      ctx: null,\n      canvasWidth: 1200,\n      canvasHeight: 170,\n      dinoX: 10,\n      dinoY: 0,\n      speed: 0,\n      // 画面移动速度\n      groundX: 0,\n      // 地面坐标\n      stage: 0,\n      // 游戏阶段\n      isRunning: false,\n      // 地面是否开始移动\n      isDied: false,\n      currentLeg: 'left',\n      // 当前小恐龙腿的状态\n      currentSwing: 'bird_up',\n      // 当前家雀翅膀的状态\n      legTimer: null,\n      // 控制左右脚切换的定时器\n      swingTimer: null,\n      // 控制翅膀切换的定时器\n      scoreTimer: null,\n      // 控制增加分数的定时器\n      pace: 100,\n      // 步频\n      swing: 200,\n      // 扇翅膀\n      isJumping: false,\n      // 跳跃状态\n      isHanging: false,\n      // 悬空状态\n      jumpHeight: 0,\n      // 当前跳跃高度\n      maxHeight: 100,\n      // 最大跳跃高度\n      gravity: 5,\n      // 重力加速度\n      minGravity: 1,\n      // 最小重力加速度\n      gravityIndex: 1,\n      // 重力增长系数\n      barriers: [],\n      clouds: [],\n      birds: [],\n      barriers_list: [{\n        name: 'tree1',\n        width: 16,\n        height: 34\n      }, {\n        name: 'tree2',\n        width: 49,\n        height: 49\n      }, {\n        name: 'tree3',\n        width: 24,\n        height: 47\n      }, {\n        name: 'tree4',\n        width: 47,\n        height: 46\n      }, {\n        name: 'tree5',\n        width: 23,\n        height: 45\n      }, {\n        name: 'tree6',\n        width: 70,\n        height: 48\n      }],\n      lastBarrierX: 1200,\n      lastCloudX: 1200,\n      scores: [1, 0, 0, 0, 0, 0],\n      score: 0,\n      loadedImages: {},\n      // 存储加载后的图片\n      images: {\n        initial: \"initial\",\n        start: \"start\",\n        die: \"die\",\n        ground: \"ground\",\n        left: \"runl\",\n        right: \"runr\",\n        jump: \"start\",\n        bird_up: \"bird_up\",\n        bird_down: \"bird_down\",\n        // bird_up: \"111\", \n        // bird_down: \"222\",\n        tree1: \"tree1\",\n        tree2: \"tree2\",\n        tree3: \"tree3\",\n        tree4: \"tree4\",\n        tree5: \"tree5\",\n        tree6: \"tree6\",\n        over: \"endText\",\n        restart: \"restart\",\n        cloud: \"cloud\",\n        \"0\": \"0\",\n        \"1\": \"1\",\n        \"2\": \"2\",\n        \"3\": \"3\",\n        \"4\": \"4\",\n        \"5\": \"5\",\n        \"6\": \"6\",\n        \"7\": \"7\",\n        \"8\": \"8\",\n        \"9\": \"9\"\n      },\n      JUMP_STATE_NONE: 0,\n      JUMP_STATE_ASCENDING: 1,\n      JUMP_STATE_HANGING: 2,\n      JUMP_STATE_DESCENDING: 3,\n      jumpState: this.JUMP_STATE_NONE,\n      deltaTime: 0,\n      lastUpdateTime: 0,\n      jumpStartTime: 0\n    };\n  },\n  computed: {\n    groundW: function () {\n      return this.loadedImages['ground'].width;\n    },\n    groundH: function () {\n      return this.loadedImages['ground'].height;\n    },\n    dinoW: function () {\n      return this.loadedImages['initial'].width;\n    },\n    dinoH: function () {\n      return this.loadedImages['initial'].height;\n    },\n    groundY: function () {\n      return this.canvasHeight - this.loadedImages['ground'].height - this.dinoH;\n    },\n    treeY: function () {\n      return this.canvasHeight - this.loadedImages['ground'].height;\n    }\n  },\n  methods: {\n    // 绘制图片\n    drawPic(pic, x, y, w, h) {\n      let img = this.loadedImages[pic]; // 使用已加载的图片\n\n      if (!img) return; // 如果图片尚未加载，直接返回\n\n      if (w === undefined) w = img.width;\n      if (h === undefined) h = img.height;\n      if (y === undefined) y = this.groundY;\n      if (x === undefined) x = 0;\n      this.ctx.drawImage(img, x, y, w, h);\n      // 绘制边框，测试碰撞边界\n      // this.drawBorder(x, y, w, h)\n    },\n    /*  测试碰撞边界\n    drawBorder(x, y, w, h, borderColor = 'black', borderSize = 2) {\n      // 保存当前的绘图状态\n      this.ctx.save();\n       // 设置边框颜色和宽度\n      this.ctx.strokeStyle = borderColor;\n      this.ctx.lineWidth = borderSize;\n       // 绘制边框矩形\n      this.ctx.strokeRect(x, y, w, h);\n       // 恢复之前的绘图状态\n      this.ctx.restore();\n    },\n    */\n    // 更新地面位置\n    updateGroundPosition() {\n      this.groundX -= this.speed;\n      if (this.groundX <= -this.canvasWidth) {\n        this.groundX = 0;\n      }\n    },\n    // 处理键盘函数\n    handleKeyDown(e) {\n      if (e.key === 'Enter' && !this.isRunning) {\n        this.isRunning = true;\n        this.speed = 2;\n        this.play(); // 启动动画\n        this.scrollTimer = setInterval(this.updateScore, 8);\n      }\n      if (this.isRunning && e.key === ' ' && !this.isJumping) {\n        // 按下空格键\n        this.isJumping = true; // 标记为正在跳跃\n        this.jumpHeight = 0; // 重置跳跃高度\n        this.jumpState = this.JUMP_STATE_ASCENDING;\n        this.jumpStartTime = Date.now(); // 记录跳跃开始时间\n        this.lastUpdateTime = Date.now(); // 初始化最后更新时间\n      }\n    },\n    // 加速函数\n    accelerate() {\n      this.speed += 0.001;\n      this.pace -= 1;\n    },\n    updateJump() {\n      if (this.isJumping) {\n        if (this.jumpState === this.JUMP_STATE_ASCENDING) {\n          if (this.gravity >= this.minGravity) {\n            this.gravityIndex += (this.jumpHeight + 1) * 0.0001;\n            this.gravity -= (this.gravity - this.minGravity) * this.gravityIndex / (this.maxHeight / this.gravity);\n          }\n          this.jumpHeight += this.gravity;\n          if (this.jumpHeight >= this.maxHeight) {\n            this.jumpState = this.JUMP_STATE_HANGING;\n            this.jumpHeight = this.maxHeight;\n            this.hangingStartTime = Date.now(); // 记录滞空开始时间\n          }\n        } else if (this.jumpState === this.JUMP_STATE_HANGING) {\n          const hangingDuration = Date.now() - this.hangingStartTime;\n          if (hangingDuration > 110) {\n            // 假设滞空时间为110毫秒\n            this.jumpState = this.JUMP_STATE_DESCENDING;\n            this.gravity = -3; // 设置重力加速度为负值，表示向上\n          }\n        } else if (this.jumpState === this.JUMP_STATE_DESCENDING) {\n          this.jumpHeight += this.gravity;\n          if (this.jumpHeight <= 0) {\n            this.jumpHeight = 0;\n            this.isJumping = false;\n            this.jumpState = this.JUMP_STATE_NONE;\n            this.gravityIndex = 1.5;\n            this.gravity = 5; // 重置重力加速度为正值，表示向下\n          }\n        }\n      } else {\n        // 如果不在跳跃状态，重置跳跃状态\n        this.jumpState = this.JUMP_STATE_NONE;\n      }\n    },\n    updateAnimations() {\n      // 绘制地面和小恐龙\n      if (!this.isDied) {\n        this.drawPic('ground', this.groundX, this.canvasHeight - this.groundH - 10);\n        this.drawPic('start', 10, this.groundY); // 根据跳跃状态调整y坐标\n        // 开始切换左右脚\n        this.legTimer = setInterval(() => {\n          this.currentLeg = this.currentLeg === 'left' ? 'right' : 'left';\n        }, this.pace);\n        this.swingTimer = setInterval(() => {\n          this.currentSwing = this.currentSwing === 'bird_up' ? 'bird_down' : 'bird_up';\n        }, this.swing);\n      }\n    },\n    // 设置障碍物\n    setBarrier() {\n      const minGap = 300; // 障碍物的间隔\n      const maxGap = 800; // 障碍物的间隔\n      const x = this.lastBarrierX + Math.random() * (maxGap - minGap) + minGap; // 随机生成 x 坐标\n      const bar = this.barriers_list[Math.floor(Math.random() * this.barriers_list.length)];\n      const n = bar.name;\n      const w = bar.width;\n      const h = bar.height;\n      const y = this.treeY - h;\n      this.barriers.push({\n        n,\n        x,\n        y,\n        w,\n        h\n      }); // 将障碍物添加到数组中\n      this.lastBarrierX = x;\n    },\n    // 绘制障碍物\n    drawBarriers() {\n      this.barriers.forEach(barrier => {\n        this.drawPic(barrier.n, barrier.x, barrier.y, barrier.w, barrier.h);\n        barrier.x -= this.speed; // 更新障碍物位置\n      });\n      // 移除超出画布的障碍物\n      this.barriers = this.barriers.filter(barrier => barrier.x + 50 > 0);\n    },\n    // 设置家雀\n    setBird() {\n      const minGap = 300; // 家雀的间隔\n      const maxGap = 800; // 家雀的间隔\n      const x = this.lastBarrierX + Math.random() * (maxGap - minGap) + minGap; // 随机生成 x 坐标\n      const n = 'bird_up';\n      const w = this.loadedImages['bird_up'].width;\n      const h = this.loadedImages['bird_up'].height;\n      const y = 50;\n      this.birds.push({\n        n,\n        x,\n        y,\n        w,\n        h\n      }); // 将家雀添加到数组中\n      this.lastBarrierX = x;\n    },\n    // 绘制家雀\n    drawBirds() {\n      this.birds.forEach(bird => {\n        this.drawPic(this.currentSwing, bird.x, bird.y, bird.w, bird.h);\n        bird.x -= this.speed; // 更新家雀位置\n      });\n      // 移除超出画布的家雀\n      this.birds = this.birds.filter(bird => bird.x + 50 > 0);\n    },\n    // 设置云\n    setCloud() {\n      const minGap = 100;\n      const maxGap = 500;\n      const x = this.lastCloudX + Math.random() * (maxGap - minGap) + minGap; // 随机生成 x 坐标\n      const height = Math.random() * 70 + 10;\n      this.clouds.push({\n        x,\n        height\n      });\n      this.lastCloudX = x;\n    },\n    // 绘制云\n    drawClouds() {\n      this.clouds.forEach(cloud => {\n        this.drawPic('cloud', cloud.x, cloud.height);\n        cloud.x -= this.speed * 3 / 2;\n      });\n      // 移除超出画布的障碍物\n      this.clouds = this.clouds.filter(cloud => cloud.x + 50 > 0);\n    },\n    // 更新分数\n    updateScore() {\n      if (!this.isDied) {\n        this.score += 1;\n        this.scores[0] = Math.floor(this.score % 10); // 个位\n        this.scores[1] = Math.floor(this.score % 100 / 10); // 十位\n        this.scores[2] = Math.floor(this.score % 1000 / 100); // 百位\n        this.scores[3] = Math.floor(this.score % 10000 / 1000); // 千位\n        this.scores[4] = Math.floor(this.score % 100000 / 10000); // 万位\n        this.scores[5] = Math.floor(this.score / 100000); // 十万位 \n      }\n    },\n    // 开始跑步，地面移动 + 小恐龙切换左右脚\n    play() {\n      this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n      this.drawBarriers(); // 绘制障碍物\n      this.drawClouds(); // 绘制云\n      this.drawBirds(); // 绘制家雀\n      this.drawPic('ground', this.groundX, this.canvasHeight - this.groundH - 10); // 绘制地面\n      this.drawPic('ground', this.groundX + this.canvasWidth, this.canvasHeight - this.groundH - 10); // 绘制拼接地面\n      this.updateGroundPosition(); // 地面移动\n      this.accelerate(); // 设置加速\n      this.updateJump(); // 更新跳跃\n      this.updateAnimations(); // 更新各物状态\n      this.checkCrash(); // 检测碰撞\n      this.stage += 0.01; // 控制家雀在某一阶段才开始出现\n\n      const dinoY = this.isJumping ? this.groundY - this.jumpHeight : this.groundY;\n      this.dinoY = dinoY;\n      const dinoP = this.isDied ? 'die' : this.isJumping ? 'start' : this.currentLeg;\n      this.drawPic(dinoP, this.dinoX, dinoY); // 根据状态调整恐龙形态\n\n      this.deltaTime = Date.now() - this.lastUpdateTime;\n      this.lastUpdateTime = Date.now();\n\n      // 每隔一定时间生成家雀\n      if (this.stage >= 1 && this.birds.length === 0 || Math.random() < 0.01) {\n        // 设定生成概率\n        this.setBird();\n      }\n      // 每隔一定时间生成障碍物\n      if (this.barriers.length === 0 || Math.random() < 0.02) {\n        // 设定生成概率\n        this.setBarrier();\n      }\n      // 每隔一定时间生成云\n      if (this.clouds.length === 0 || Math.random() < 2) {\n        // 设定生成概率\n        this.setCloud();\n      }\n      for (let i = this.scores.length; i > 0; i--) {\n        this.drawPic(`${this.scores[i]}`, 1000 + (5 - i) * 15, 20);\n      }\n      if (this.isDied) {\n        this.drawPic('over', 470, 65);\n        this.drawPic('restart', 545, 90);\n        return;\n      }\n\n      // 请求下一帧动画\n      requestAnimationFrame(this.play.bind(this));\n    },\n    // 检测碰撞\n    checkCrash() {\n      if (!this.isDied) {\n        this.barriers.forEach(barrier => {\n          // 恐龙的右边界超过障碍物的左边界 且 下边界未超过障碍物的上边界\n          if (this.dinoX + this.dinoW - 5 >= barrier.x && this.dinoY + this.dinoH - 20 >= barrier.y) {\n            this.gameOver();\n          }\n          // else this.score += 15\n        });\n        this.birds.forEach(bird => {\n          // 恐龙的右边界超过障碍物的左边界 且 下边界未超过障碍物的上边界\n          if (this.dinoX + this.dinoW >= bird.x && this.dinoY <= bird.y + bird.h) {\n            this.gameOver();\n          }\n          // else this.score += 15\n        });\n      }\n    },\n    gameOver() {\n      // 发生碰撞，执行相应的操作\n      console.log(\"碰撞发生！\");\n      this.isDied = true;\n      this.isRunning = false;\n      this.speed = 0;\n    },\n    resetGame() {\n      if (this.isDied) {\n        window.location.reload();\n      }\n    }\n  },\n  mounted() {\n    this.ctx = this.$refs.canvas.getContext(\"2d\");\n    // 预加载图片资源\n    const imagePromises = Object.entries(this.images).map(([key, imageSrc]) => {\n      return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.src = require(`/src/assets/images/${imageSrc}.png`);\n        img.onload = () => {\n          this.loadedImages[key] = img; // 存储已加载的图片\n          resolve();\n        };\n        img.onerror = () => {\n          console.error(`加载图片失败: ${img.src}`);\n          reject();\n        };\n      });\n    });\n\n    // 确保所有图片资源加载完成后再启动动画\n    Promise.all(imagePromises).then(() => {\n      this.updateAnimations(); // 初始化\n      window.addEventListener('keydown', this.handleKeyDown); // 监听键盘事件\n      document.getElementById('canvas').addEventListener('click', this.resetGame);\n    }).catch(error => {\n      console.error(\"图片加载失败：\", error);\n    });\n  },\n  unmounted() {\n    if (this.legTimer) {\n      clearInterval(this.legTimer);\n    }\n    if (this.swingTimer) {\n      clearInterval(this.swingTimer);\n    }\n    if (this.scoreTimer) {\n      clearInterval(this.scoreTimer);\n    }\n    document.getElementById('canvas').removeEventListener('click', this.resetGame);\n    // window.removeEventListener('keydown', this.handleKeyDown)\n  }\n};","map":{"version":3,"names":["name","data","ctx","canvasWidth","canvasHeight","dinoX","dinoY","speed","groundX","stage","isRunning","isDied","currentLeg","currentSwing","legTimer","swingTimer","scoreTimer","pace","swing","isJumping","isHanging","jumpHeight","maxHeight","gravity","minGravity","gravityIndex","barriers","clouds","birds","barriers_list","width","height","lastBarrierX","lastCloudX","scores","score","loadedImages","images","initial","start","die","ground","left","right","jump","bird_up","bird_down","tree1","tree2","tree3","tree4","tree5","tree6","over","restart","cloud","JUMP_STATE_NONE","JUMP_STATE_ASCENDING","JUMP_STATE_HANGING","JUMP_STATE_DESCENDING","jumpState","deltaTime","lastUpdateTime","jumpStartTime","computed","groundW","groundH","dinoW","dinoH","groundY","treeY","methods","drawPic","pic","x","y","w","h","img","undefined","drawImage","updateGroundPosition","handleKeyDown","e","key","play","scrollTimer","setInterval","updateScore","Date","now","accelerate","updateJump","hangingStartTime","hangingDuration","updateAnimations","setBarrier","minGap","maxGap","Math","random","bar","floor","length","n","push","drawBarriers","forEach","barrier","filter","setBird","drawBirds","bird","setCloud","drawClouds","clearRect","checkCrash","dinoP","i","requestAnimationFrame","bind","gameOver","console","log","resetGame","window","location","reload","mounted","$refs","canvas","getContext","imagePromises","Object","entries","map","imageSrc","Promise","resolve","reject","Image","src","require","onload","onerror","error","all","then","addEventListener","document","getElementById","catch","unmounted","clearInterval","removeEventListener"],"sources":["E:\\code\\Web\\dino\\src\\components\\game.vue"],"sourcesContent":["<template>\n  <div class=\"game\">\n    <canvas id=\"canvas\" ref=\"canvas\" :width=\"canvasWidth\" :height=\"canvasHeight\" />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'playGame',\n  data() {\n    return {\n      ctx: null,\n      canvasWidth: 1200,\n      canvasHeight: 170,\n      dinoX: 10,\n      dinoY: 0,\n      speed: 0,                   // 画面移动速度\n      groundX: 0,                 // 地面坐标\n      stage: 0,                   // 游戏阶段\n      isRunning: false,           // 地面是否开始移动\n      isDied: false,\n      currentLeg: 'left',         // 当前小恐龙腿的状态\n      currentSwing: 'bird_up',    // 当前家雀翅膀的状态\n      legTimer: null,             // 控制左右脚切换的定时器\n      swingTimer: null,           // 控制翅膀切换的定时器\n      scoreTimer: null,           // 控制增加分数的定时器\n      pace: 100,                  // 步频\n      swing: 200,                 // 扇翅膀\n      isJumping: false,           // 跳跃状态\n      isHanging: false,           // 悬空状态\n      jumpHeight: 0,              // 当前跳跃高度\n      maxHeight: 100,             // 最大跳跃高度\n      gravity: 5,                 // 重力加速度\n      minGravity: 1,              // 最小重力加速度\n      gravityIndex: 1,            // 重力增长系数\n      barriers: [],\n      clouds: [],\n      birds: [],\n      barriers_list: [\n        {\n          name: 'tree1',\n          width: 16,\n          height: 34\n        },\n        {\n          name: 'tree2',\n          width: 49,\n          height: 49\n        },\n        {\n          name: 'tree3',\n          width: 24,\n          height: 47\n        },\n        {\n          name: 'tree4',\n          width: 47,\n          height: 46\n        },\n        {\n          name: 'tree5',\n          width: 23,\n          height: 45\n        },\n        {\n          name: 'tree6',\n          width: 70,\n          height: 48\n        }\n      ],\n      lastBarrierX: 1200,\n      lastCloudX: 1200,\n      scores: [1, 0, 0, 0, 0, 0],\n      score: 0,\n      loadedImages: {},           // 存储加载后的图片\n      images: {\n        initial: \"initial\",\n        start: \"start\",\n        die: \"die\",\n        ground: \"ground\",\n        left: \"runl\",\n        right: \"runr\",\n        jump: \"start\",\n        bird_up: \"bird_up\", \n        bird_down: \"bird_down\",\n        // bird_up: \"111\", \n        // bird_down: \"222\",\n        tree1: \"tree1\",\n        tree2: \"tree2\",\n        tree3: \"tree3\",\n        tree4: \"tree4\",\n        tree5: \"tree5\",\n        tree6: \"tree6\",\n        over: \"endText\",\n        restart: \"restart\",\n        cloud: \"cloud\",\n        \"0\":\"0\",\n        \"1\":\"1\",\n        \"2\":\"2\",\n        \"3\":\"3\",\n        \"4\":\"4\",\n        \"5\":\"5\",\n        \"6\":\"6\",\n        \"7\":\"7\",\n        \"8\":\"8\",\n        \"9\":\"9\"\n      },\n      JUMP_STATE_NONE: 0,\n      JUMP_STATE_ASCENDING: 1,\n      JUMP_STATE_HANGING: 2,\n      JUMP_STATE_DESCENDING: 3,\n      jumpState: this.JUMP_STATE_NONE,\n      deltaTime: 0,\n      lastUpdateTime: 0,\n      jumpStartTime: 0,\n    }\n  },\n  computed: {\n    groundW: function() {return this.loadedImages['ground'].width},\n    groundH: function() {return this.loadedImages['ground'].height},\n    dinoW: function() {return this.loadedImages['initial'].width},\n    dinoH: function() {return this.loadedImages['initial'].height},\n    groundY: function() {return this.canvasHeight - this.loadedImages['ground'].height - this.dinoH},\n    treeY: function() {\n      return this.canvasHeight - this.loadedImages['ground'].height\n    }\n  },\n  methods: {\n    // 绘制图片\n    drawPic(pic, x, y, w, h) {\n      let img = this.loadedImages[pic] // 使用已加载的图片\n\n      if (!img) return // 如果图片尚未加载，直接返回\n\n      if (w === undefined) w = img.width\n      if (h === undefined) h = img.height\n      if (y === undefined) y = this.groundY\n      if (x === undefined) x = 0\n\n      this.ctx.drawImage(img, x, y, w, h)\n      // 绘制边框，测试碰撞边界\n      // this.drawBorder(x, y, w, h)\n    },\n    /*  测试碰撞边界\n    drawBorder(x, y, w, h, borderColor = 'black', borderSize = 2) {\n      // 保存当前的绘图状态\n      this.ctx.save();\n\n      // 设置边框颜色和宽度\n      this.ctx.strokeStyle = borderColor;\n      this.ctx.lineWidth = borderSize;\n\n      // 绘制边框矩形\n      this.ctx.strokeRect(x, y, w, h);\n\n      // 恢复之前的绘图状态\n      this.ctx.restore();\n    },\n    */\n    // 更新地面位置\n    updateGroundPosition() {\n      this.groundX -= this.speed\n\n      if (this.groundX <= -this.canvasWidth) {\n        this.groundX = 0\n      }\n    },\n    // 处理键盘函数\n    handleKeyDown(e) {\n      if (e.key === 'Enter' && !this.isRunning) {\n        this.isRunning = true\n        this.speed = 2\n        this.play() // 启动动画\n        this.scrollTimer = setInterval(this.updateScore, 8)\n      }\n\n      if (this.isRunning && e.key === ' ' && !this.isJumping) { // 按下空格键\n        this.isJumping = true // 标记为正在跳跃\n        this.jumpHeight = 0 // 重置跳跃高度\n        this.jumpState = this.JUMP_STATE_ASCENDING\n        this.jumpStartTime = Date.now() // 记录跳跃开始时间\n        this.lastUpdateTime = Date.now() // 初始化最后更新时间\n      }\n    },\n    // 加速函数\n    accelerate() {\n      this.speed += 0.001\n      this.pace -= 1\n    },\n    updateJump() {\n      if (this.isJumping) {\n        if (this.jumpState === this.JUMP_STATE_ASCENDING) {\n          if(this.gravity >= this.minGravity){\n            this.gravityIndex += ( this.jumpHeight + 1) * 0.0001\n            this.gravity -= ( this.gravity - this.minGravity ) * this.gravityIndex / (( this.maxHeight / this.gravity ))\n          }\n          this.jumpHeight += this.gravity;\n          if (this.jumpHeight >= this.maxHeight) {\n            this.jumpState = this.JUMP_STATE_HANGING;\n            this.jumpHeight = this.maxHeight;\n            this.hangingStartTime = Date.now(); // 记录滞空开始时间\n          }\n        } else if (this.jumpState === this.JUMP_STATE_HANGING) {\n          const hangingDuration = Date.now() - this.hangingStartTime;\n          if (hangingDuration > 110) { // 假设滞空时间为110毫秒\n            this.jumpState = this.JUMP_STATE_DESCENDING;\n            this.gravity = -3; // 设置重力加速度为负值，表示向上\n          }\n        } else if (this.jumpState === this.JUMP_STATE_DESCENDING) {\n          this.jumpHeight += this.gravity\n          if (this.jumpHeight <= 0) {\n            this.jumpHeight = 0;\n            this.isJumping = false;\n            this.jumpState = this.JUMP_STATE_NONE;\n            this.gravityIndex = 1.5\n            this.gravity = 5; // 重置重力加速度为正值，表示向下\n          }\n        }\n      } else {\n        // 如果不在跳跃状态，重置跳跃状态\n        this.jumpState = this.JUMP_STATE_NONE;\n      }\n    },\n    updateAnimations() {\n      // 绘制地面和小恐龙\n      if(!this.isDied){\n        this.drawPic('ground', this.groundX, this.canvasHeight - this.groundH - 10)\n        this.drawPic('start', 10, this.groundY)  // 根据跳跃状态调整y坐标\n        // 开始切换左右脚\n        this.legTimer = setInterval(() => {\n          this.currentLeg = this.currentLeg === 'left' ? 'right' : 'left'\n        }, this.pace)\n        this.swingTimer = setInterval(() => {\n          this.currentSwing = this.currentSwing === 'bird_up' ? 'bird_down' : 'bird_up'\n        }, this.swing)\n      }\n    },\n    // 设置障碍物\n    setBarrier() {\n      const minGap = 300 // 障碍物的间隔\n      const maxGap = 800 // 障碍物的间隔\n      const x = this.lastBarrierX + Math.random() * (maxGap - minGap) + minGap // 随机生成 x 坐标\n      const bar = this.barriers_list[Math.floor(Math.random() * this.barriers_list.length)]\n      const n = bar.name\n      const w = bar.width\n      const h = bar.height\n      const y = this.treeY - h\n      this.barriers.push({ n, x, y, w, h }) // 将障碍物添加到数组中\n      this.lastBarrierX = x\n    },\n    // 绘制障碍物\n    drawBarriers() {\n      this.barriers.forEach(barrier => {\n        this.drawPic(barrier.n, barrier.x, barrier.y, barrier.w, barrier.h)\n        barrier.x -= this.speed // 更新障碍物位置\n      })\n      // 移除超出画布的障碍物\n      this.barriers = this.barriers.filter(barrier => barrier.x + 50 > 0)\n    },\n    // 设置家雀\n    setBird() {\n      const minGap = 300 // 家雀的间隔\n      const maxGap = 800 // 家雀的间隔\n      const x = this.lastBarrierX + Math.random() * (maxGap - minGap) + minGap // 随机生成 x 坐标\n      const n = 'bird_up'\n      const w = this.loadedImages['bird_up'].width\n      const h = this.loadedImages['bird_up'].height\n      const y = 50\n      this.birds.push({ n, x, y, w, h }) // 将家雀添加到数组中\n      this.lastBarrierX = x\n    },\n    // 绘制家雀\n    drawBirds() {\n      this.birds.forEach(bird => {\n        this.drawPic(this.currentSwing, bird.x, bird.y, bird.w, bird.h)\n        bird.x -= this.speed // 更新家雀位置\n      })\n      // 移除超出画布的家雀\n      this.birds = this.birds.filter(bird => bird.x + 50 > 0)\n    },\n    // 设置云\n    setCloud() {\n      const minGap = 100 \n      const maxGap = 500 \n      const x = this.lastCloudX + Math.random() * (maxGap - minGap) + minGap // 随机生成 x 坐标\n      const height = Math.random() * 70 + 10\n      this.clouds.push({ x, height })\n      this.lastCloudX = x\n    },\n    // 绘制云\n    drawClouds() {\n      this.clouds.forEach(cloud => {\n        this.drawPic('cloud', cloud.x, cloud.height)\n        cloud.x -= this.speed * 3 / 2\n      })\n      // 移除超出画布的障碍物\n      this.clouds = this.clouds.filter(cloud => cloud.x + 50 > 0)\n    },\n    // 更新分数\n    updateScore() {\n      if(!this.isDied){\n        this.score += 1\n        this.scores[0] = Math.floor(this.score % 10) // 个位\n        this.scores[1] = Math.floor((this.score % 100) / 10) // 十位\n        this.scores[2] = Math.floor((this.score % 1000) / 100) // 百位\n        this.scores[3] = Math.floor((this.score % 10000) / 1000) // 千位\n        this.scores[4] = Math.floor((this.score % 100000) / 10000) // 万位\n        this.scores[5] = Math.floor(this.score / 100000) // 十万位 \n      }\n    },\n    // 开始跑步，地面移动 + 小恐龙切换左右脚\n    play() {\n      this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight)\n      \n      this.drawBarriers()             // 绘制障碍物\n      this.drawClouds()               // 绘制云\n      this.drawBirds()                // 绘制家雀\n      this.drawPic('ground', this.groundX, this.canvasHeight - this.groundH - 10)         // 绘制地面\n      this.drawPic('ground', this.groundX + this.canvasWidth, this.canvasHeight - this.groundH - 10)    // 绘制拼接地面\n      this.updateGroundPosition()     // 地面移动\n      this.accelerate()               // 设置加速\n      this.updateJump()               // 更新跳跃\n      this.updateAnimations()         // 更新各物状态\n      this.checkCrash()               // 检测碰撞\n      this.stage += 0.01              // 控制家雀在某一阶段才开始出现\n\n      const dinoY = this.isJumping ? (this.groundY - this.jumpHeight) : this.groundY\n      this.dinoY = dinoY\n      const dinoP = this.isDied ? 'die' : this.isJumping ? 'start' : this.currentLeg\n      this.drawPic(dinoP, this.dinoX, dinoY)  // 根据状态调整恐龙形态\n      \n      this.deltaTime = Date.now() - this.lastUpdateTime\n      this.lastUpdateTime = Date.now()\n\n\n      // 每隔一定时间生成家雀\n      if (this.stage >= 1 && this.birds.length === 0 || Math.random() < 0.01) { // 设定生成概率\n        this.setBird()\n      }\n      // 每隔一定时间生成障碍物\n      if (this.barriers.length === 0 || Math.random() < 0.02) { // 设定生成概率\n        this.setBarrier()\n      }\n      // 每隔一定时间生成云\n      if (this.clouds.length === 0 || Math.random() < 2) { // 设定生成概率\n        this.setCloud()\n      }\n\n      \n      for(let i = this.scores.length ; i > 0 ; i--){\n        this.drawPic(`${this.scores[i]}`,1000 + (5 - i) * 15,20)\n      }\n      \n      if(this.isDied){\n        this.drawPic('over', 470, 65)\n        this.drawPic('restart',545, 90)\n        return\n      }\n\n      // 请求下一帧动画\n      requestAnimationFrame(this.play.bind(this))\n    },\n    // 检测碰撞\n    checkCrash() {\n      if(!this.isDied){\n        this.barriers.forEach(barrier => {\n          // 恐龙的右边界超过障碍物的左边界 且 下边界未超过障碍物的上边界\n          if (this.dinoX + this.dinoW -5>= barrier.x && \n              this.dinoY + this.dinoH -20>= barrier.y ) {\n            this.gameOver()\n          }\n          // else this.score += 15\n        })\n        this.birds.forEach(bird => {\n          // 恐龙的右边界超过障碍物的左边界 且 下边界未超过障碍物的上边界\n          if (this.dinoX + this.dinoW >= bird.x && \n              this.dinoY <= bird.y + bird.h) {\n            this.gameOver()\n          }\n          // else this.score += 15\n        })\n      }\n    },\n    gameOver() {\n      // 发生碰撞，执行相应的操作\n      console.log(\"碰撞发生！\")\n      this.isDied = true\n      this.isRunning = false\n      this.speed = 0\n    },\n    resetGame() {\n      if(this.isDied){\n        window.location.reload()\n      }\n    }\n  },\n  mounted() {\n    this.ctx = this.$refs.canvas.getContext(\"2d\")\n    // 预加载图片资源\n    const imagePromises = Object.entries(this.images).map(([key, imageSrc]) => {\n      return new Promise((resolve, reject) => {\n        const img = new Image()\n        img.src = require(`/src/assets/images/${imageSrc}.png`)\n\n        img.onload = () => {\n          this.loadedImages[key] = img // 存储已加载的图片\n          resolve()\n        }\n\n        img.onerror = () => {\n          console.error(`加载图片失败: ${img.src}`)\n          reject()\n        }\n      })\n    })\n    \n    // 确保所有图片资源加载完成后再启动动画\n    Promise.all(imagePromises)\n    .then(() => {\n        this.updateAnimations()       // 初始化\n        window.addEventListener('keydown', this.handleKeyDown)  // 监听键盘事件\n        document.getElementById('canvas').addEventListener('click', this.resetGame)\n      })\n      .catch(error => {\n        console.error(\"图片加载失败：\", error)\n      })\n\n  },\n  unmounted() {\n    if (this.legTimer) {\n      clearInterval(this.legTimer)\n    }\n    if (this.swingTimer) {\n      clearInterval(this.swingTimer)\n    }\n    if (this.scoreTimer) {\n      clearInterval(this.scoreTimer)\n    }\n    document.getElementById('canvas').removeEventListener('click', this.resetGame)\n    // window.removeEventListener('keydown', this.handleKeyDown)\n  }\n\n}\n</script>\n\n<style scoped>\n  #canvas {\n    background-color: #fff;\n  }\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}